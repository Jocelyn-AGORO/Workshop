<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cluely</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="js/main.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>
<body
        x-init="page=1"
        x-data="{
        page: 1,
        isopen: false,
        chatBot: false
        }"
        @keydown.escape="isopen=false"
>
<!-- Tool Bar -->

<!-- Page d'acceuil -->
<div
        class="start-page"
        x-show="page === 1"
>
    <div class="starter">
        <h1 class="start-title">Bienvenue au Cluely</h1>
        <button x-on:click="page = 2;chatBot = true">
            Commencer
        </button>
    </div>
</div>
<div class="game"
     x-show="page === 2"
>
    <!-- Page de Jeu -->
    <div class="tools">
        <div
                @click="page=1"
        >Recommencer</div>
        <div>Indices</div>
        <div
          @click="page=3"
        >Règles</div>
    </div>
    <!-- Plateau de Jeu -->
    <div class="cartes"
         x-data="{
         topCharacters: []
         }"
         x-init="topCharacters = getTopCharacters()"
    >
        <template
                x-for="topCharacter in topCharacters"
                :key="topCharacter.id"
        >
        <div class="carte"
             x-data="{
                attributs: []
             }"
             @click="attributs=getCharAttributes(topCharacter.id);$dispatch('char', {msg: attributs});isopen=true;"
        >
            <img src="./images/carte.png" alt="carte caractère">
        </div>
        </template>
    </div>
    <div class="personas">
        <div class="persona">
            <img src="images/caracteres/caractere1.png" alt="personna">
        </div>
        <div class="persona">
            <img src="images/caracteres/caractere7.png" alt="personna">
        </div>
        <div class="persona">
            <img src="images/caracteres/caractere8.png" alt="personna">
        </div>
        <div class="persona">
            <img src="images/caracteres/caractere4.png" alt="personna">
        </div>
    </div>
    <div class="personas">
        <div class="persona">
            <img src="images/caracteres/caractere2.png" alt="personna">
        </div>
        <div class="persona">
            <img src="images/caracteres/caractere6.png" alt="personna">
        </div>
        <div class="persona">
            <img src="images/caracteres/caractere5.png" alt="personna">
        </div>
        <div class="persona">
            <img src="images/caracteres/caractere3.png" alt="personna">
        </div>
    </div>
    <div class="cartes"
         x-data="{
         bottomCharacters: []
         }"
         x-init="bottomCharacters = getBottomCharacters()"
    >
        <template
                x-for="bottomCharacter in bottomCharacters"
                :key="bottomCharacter.id"
        >
            <div class="carte"
                 x-data="{
                attributs: []
             }"
                 @click="attributs=getCharAttributes(bottomCharacter.id, $data);$dispatch('char', {msg: attributs});isopen=true;"
            >
                <img src="./images/carte.png" alt="carte caractère">
            </div>
        </template>
    </div>
    <div class="modal"
         role="dialog"
         tabindex="-1"
         @click.away="isopen = false"
         x-show="isopen"
         x-cloak
         x-transition>
        <div class="card"
             x-data="{
                comportements: []
             }"
             @char.window="comportements = $event.detail.msg;console.log(comportements);">
            <div style="display:flex;justify-content:flex-end;margin-top:20px;width: 80%;">
                <div
                        @click="isopen = false"
                        style="color: blue;font-size:12px; font-weight: bold;"
                >
                    X
                </div>
            </div>
            <div class="attributs">
                <template
                        x-for="comportement in comportements"
                        :key="comportement.id"
                >
                    <div class="attribut"
                         x-text="comportement.libelle">
                    </div>
                </template>
            </div>
        </div>
    </div>
    <div class="modal"
         role="dialog"
         tabindex="-1"
         @click.away="chatBot = false"
         x-show="chatBot"
         x-cloak
         x-transition>
        <div class="situation">
            <div style="display: flex;justify-content: flex-end;width: 100%"
                 @click="chatBot=false"
            >
                Fermer
            </div>
            <div class="description">
                <div class="master-title">Maître du Jeu</div>
                <div class="master-description">
                    <p>
                        Le maître du jeu a fait son choix, vous devrez évaluez la situation et dire si elle est une situation de harcelement sexuel ou non :
                    </p>
                </div>
                <div class="situation"
                    x-data="{
                    }">
                    <div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Page des règles du jeux -->
<div class="regles"
    x-show="page === 3">
    <div class="regles-container">
        <img src="images/regles.png" alt="les règles du jeu">
    </div>
</div>
</body>
</html>